{% from "govuk/components/table/macro.njk" import govukTable %}

{% macro holdAgainstTransferDetails(offenderName, holdAgainstTransferAlerts) %}
  {% if holdAgainstTransferAlerts.length %}
    {% set resultsRows = [] %}

    {% for alert in holdAgainstTransferAlerts %}
      {% set resultsRows = (resultsRows.push([
        { text: alert.description },
        { html: alert.comments, classes: 'govuk-input--width-10' },
        { text: alert.dateAdded },
        { text: alert.createdBy }
      ]), resultsRows) %}
    {% endfor %}

    <h3 class="govuk-heading-l">Hold against transfer details for {{offenderName}}</h3>

    {{ govukTable({
      head: [
        {
          text: "Alert"
        },
        {
          text: "Comments"
        },
        {
          text: "Date added"
        },
        {
          text: "Created by"
        }
      ],
      rows: resultsRows,
      attributes: {
        "data-test": 'hold-against-transfer-alerts-table'
      }
    }) }}
  {% endif %}
{% endmacro %}
