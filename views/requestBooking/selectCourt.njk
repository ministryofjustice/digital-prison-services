{% extends "../partials/layout.njk" %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}
{% from "govuk/components/select/macro.njk" import govukSelect %}
{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/textarea/macro.njk" import govukTextarea %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/date-input/macro.njk" import govukDateInput %}
{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/fieldset/macro.njk" import govukFieldset %}
{% from "components/datePicker/datePicker.njk" import datePicker %}
{% from "components/timePicker/timePicker.njk" import timePicker %}
{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}

{% set title = 'The video link date and time is available' %}

{% macro errorClass(field) -%}
    {{ ' govuk-input--error' if errors | hasErrorWithPrefix([field, 'dobError']) else '' }}
{%- endmacro %}

{% block content %}
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-full">
            <h1 class="govuk-heading-l">
                {{title}}
            </h1>

            <div class="govuk-body">
                <p>
                    The date and time is currently available. A request will be sent to the prison to book the video link.
                    The prison will contact your court if the date or time is not available later.
                </p>
            </div>

            {% if errors.length > 0 %}
                {{ govukErrorSummary({
                    titleText: "There is a problem",
                    errorList: errors,
                    attributes: { 'data-qa-errors': true }
                }) }}
            {% endif %}

            <form method="POST" novalidate="novalidate" action="/request-booking/create-booking-request">

                {{ govukSummaryList({
                    classes: "govuk-summary-list--no-border",
                    rows: details | toSummaryViewModel
                }) }}

                {{ govukSelect({
                    id: "hearing-location",
                    name: "hearingLocation",
                    label: {
                        text: "What court are you in?"
                    },
                    items: hearingLocations | addDefaultSelectedVale('Select'),
                    errorMessage: errors | findError('hearingLocation')
                }) }}

                {{ govukButton({ text: "Continue", type: "submit" }) }}
            </form>
        </div>
    </div>
{% endblock %}
