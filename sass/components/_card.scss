/* ==========================================================================
   COMPONENTS / #CARD
   ========================================================================== */

/**
 * 1. Is needed for the :active top positioning.
 * 2. Border is used to create a divider between the white content
 *    box and an image.
 * 3. Creates the 'pressed down' effect when clicked.
 * 4. Removes padding-top from headings directly after the card group.
 * 5. Includes the border width to achieve the correct left alignment.
 * 6. Stops the heading from spanning the full width of the card.
 * 7. Removes padding top for the feature heading positioning.
 */

$card-border-width: 1px;
$card-border-bottom-width: govuk-spacing(1);
$card-border-hover-color: $govuk-border-colour;
$card-border-color: lighten($card-border-hover-color, 15%); // $govuk-border-colour;

.card {
  margin-bottom: govuk-spacing(7);

  background: $govuk-body-background-colour;
  border: $card-border-width solid $card-border-color;
  position: relative; /* [1] */
  width: 100%;
}

.card__content {
  padding: govuk-spacing(5);

  & > *:first-child {
    margin-top: 0;
  }
  & > *:last-child {
    margin-bottom: 0;
  }
}

.card__heading,
.card__description {
  margin-bottom: govuk-spacing(3);
}

/* Clickable card
   ========================================================================== */

.card--clickable {
  border-bottom-width: $card-border-bottom-width;

  &:hover,
  &:active {
    cursor: pointer;

    .card__heading a,
    .card__link {
      color: $govuk-link-hover-colour;
      text-decoration: none;

      &:focus {
        @include govuk-focused-text;
      }
    }
  }

  &:hover {
    border-color: $card-border-hover-color;
  }

  &:active {
    border-color: $card-border-hover-color;
    bottom: -$card-border-width; /* [3] */
  }
}

/* Card group
   ========================================================================== */

/**
 * Card group allows you to have a row of cards.
 *
 * Flexbox is used to make each card in a row the same height.
 */

.card-group {
  display: flex;
  flex-wrap: wrap;

  margin-bottom: govuk-spacing(3);
  padding: 0;

  @include govuk-media-query($until: desktop) {
    margin-bottom: govuk-spacing(6);
  }

  + h2,
  + .govuk-heading-l,
  + h3,
  + .govuk-heading-m {
    padding-top: 0; /* [4] */
  }
}

.card-group__item {
  display: flex;

  list-style-type: none;
  margin-bottom: 0;

  @include govuk-media-query($until: desktop) {
    flex: 0 0 100%;
  }

  .card {
    margin-bottom: govuk-spacing(5);
  }

  @include govuk-media-query($until: desktop) {
    .card {
      margin-bottom: govuk-spacing(3);
    }

    &:last-child .card {
      margin-bottom: 0;
    }
  }
}
